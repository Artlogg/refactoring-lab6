## Рефакторинг и code smells

### Найденные проблемы
- Слишком длинная функция
- Сложная логика и вложенные условия
- Магические числа
- Плохая читаемость кода

### Выполненные улучшения
- Код разбит на отдельные функции
- Магические числа вынесены в константы
- Улучшена структура и читаемость
- Поведение кода сохранено

### Результат
Код стал проще для понимания и сопровождения.
Все тесты продолжают успешно проходить.
